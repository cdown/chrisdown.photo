<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Chris Down Photography</title>
    <meta name="description" content="Chris Down is a British wildlife photographer currently based in London, England.">

    <meta property="og:url" content="https://chrisdown.photo/">
    <meta property="og:type" content="website">
    <meta property="og:title" content="Chris Down Photography">
    <meta property="og:description" content="Chris Down is a British wildlife photographer currently based in London, England.">
    <meta property="og:image" content="https://live.staticflickr.com/65535/53436051798_e570d53c2a_b.jpg">
    <meta name="twitter:card" content="summary">

    <style>
        :root {
            --navbar-height: 40px;
            --navbar-padding: 0px;
            --font-primary: 'Geomanist', sans-serif;
            --text-color: #333;
            --text-color-hover: #aaa;
            --transition-duration: 0.3s;
            --scroll-hint-size: 48px;
            scroll-behavior: smooth;
        }

        body {
            margin: 0;
            font-family: var(--font-primary);
        }

        .navbar {
            padding: var(--navbar-padding);
            display: flex;
            justify-content: space-between;
            align-items: center;
            top: 0;
            height: var(--navbar-height);
            margin: 0;
        }

        .navbar-menu {
            list-style: none;
            padding: 0;
            margin: 0;
            display: flex;
        }

        .navbar-menu-item a {
            padding: 6px 20px;
            text-transform: lowercase;
            font-size: 20px;
            color: var(--text-color);
            text-decoration: none;
        }

        .navbar-menu-item a:hover {
            color: var(--text-color-hover);
        }

        .navbar-title {
            text-transform: lowercase;
            font-size: 20px;
            color: var(--text-color);
            text-decoration: none;
        }

        .navbar-title-full {
            display: inline;
        }

        .navbar-title-short {
            display: none;
        }
        @media (max-width: 500px) {
            .navbar-title-full {
                display: none;
            }
            .navbar-title-short {
                display: inline;
            }
        }

        .gallery-container {
            position: absolute;
            top: calc(var(--navbar-height) + var(--navbar-padding));
            left: 0;
            right: 0;
            bottom: 0;
            white-space: nowrap;
            overflow: hidden;
        }

        .gallery-item {
            display: inline-block;
            height: 100%;
        }

        .gallery-image {
            height: 100%;
        }

        @keyframes arrowSideways {
            0% {
                transform: translateX(-50px) translateY(-50%);
                opacity: 0;
            }
            25% {
                transform: translateX(-50px) translateY(-50%);
                opacity: 1;
            }
            75% {
                transform: translateX(0) translateY(-50%);
                opacity: 1;
            }
            100% {
                opacity: 0;
            }
        }
        @keyframes arrowDownwards {
            0% {
                transform: translateX(0) translateY(-25px);
                opacity: 0;
            }
            25% {
                transform: translateX(0) translateY(-25px);
                opacity: 1;
            }
            75% {
                transform: translateX(0) translateY(25px);
                opacity: 1;
            }
            100% {
                transform: translateX(0) translateY(25px);
                opacity: 0;
            }
        }

        .scroll-hint {
            position: fixed;
            top: 50%;
            right: 10px;
            transform: translateY(-50%);
            z-index: 1000;
            background: none;
            color: #fff;
            text-shadow: -2px 0 #000, 0 2px #000, 2px 0 #000, 0 -2px #000;
            font-size: var(--scroll-hint-size);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            opacity: 0;
            transition: opacity var(--transition-duration) ease;
        }

        .about-content {
            display: flex;
        }

        #about-link {
            cursor: pointer;
        }

.about-overlay {
    position: fixed;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    width: 70%;
    max-width: 800px;
    display: flex; /* This ensures the image and text are laid out side by side */
    flex-direction: row; /* Horizontal layout */
    align-items: center; /* Vertically align the items */
    text-align: left;
    z-index: 1000;
    visibility: hidden;
    opacity: 0;
    background-color: #fff;
    padding: 20px;
}

.about-image {
    width: auto; /* Allow the width to adjust naturally */
    height: auto; /* Maintain the natural aspect ratio */
    max-width: 50%; /* Restrict the maximum width to 50% of the container */
    max-height: 100%; /* Ensure it doesn't exceed the container's height */
    margin-right: 20px; /* Space between the image and text */
    object-fit: contain; /* Ensure the entire image is visible */
}

.about-text {
    flex: 1; /* Take up the remaining space */
}

        .about-overlay.active {
            visibility: visible;
            opacity: 1;
        }

        .about-close {
            position: absolute;
            top: 10px;
            right: 10px;
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: var(--text-color);
        }


        .about-text p {
            margin: 0 0 10px;
            line-height: 1.5;
            color: var(--text-color);
        }

        .about-text a {
            color: inherit;
            text-decoration: underline;
        }


@media (max-width: 500px) {
    .about-overlay {
        flex-direction: column;
    }

    .about-image {
        margin-right: 0; /* Remove right margin for the vertical layout */
        margin-bottom: 20px; /* Add some space below the image */
        max-width: 100%; /* Make sure the image adjusts to the container width */
    }
}
    </style>
</head>
<body>
    <nav class="navbar">
        <ul class="navbar-menu">
            <li class="navbar-menu-item">
                <a href="#gallery">Gallery</a>
            </li>
        </ul>
        <a href="#gallery" class="navbar-title">Chris Down Photography</a>
        <ul class="navbar-menu">
            <li class="navbar-menu-item">
                <a id="about-link">About</a>
            </li>
        </ul>
    </nav>

    <div class="gallery-container" id="gallery-container">{{ gallery_items }}</div>

    <div class="about-overlay" id="about-overlay">
        <button class="about-close" id="about-close">&times;</button>
        {{ about }}
    </div>

    <div class="scroll-hint" id="scroll-hint">&#x2192;</div>
    <script>
        const galleryContainer = document.getElementById('gallery-container');
        const scrollHint = document.getElementById('scroll-hint');
        let isDragging = false;
        let startX = 0;
        let scrollLeft = 0;

        let fadedOut = false;
        let currentChosenHeight = 0;
        const availableHeights = [1080, 1440, 2160];

        /**
         * Duplicate gallery items to achieve wrap-around scrolling.
         */
        function duplicateContent() {
            const items = Array.from(galleryContainer.children);
            items.forEach(item => galleryContainer.appendChild(item.cloneNode(true)));
        }

        function wrapScroll() {
            const totalWidth = galleryContainer.scrollWidth / 2;
            if (galleryContainer.scrollLeft >= totalWidth) {
                galleryContainer.scrollLeft -= totalWidth;
            } else if (galleryContainer.scrollLeft <= 0) {
                galleryContainer.scrollLeft += totalWidth;
            }
        }

        function ensureWraparound(scrollAmount) {
            const totalWidth = galleryContainer.scrollWidth / 2;
            let targetScrollLeft = galleryContainer.scrollLeft + scrollAmount;

            if (targetScrollLeft < 0) {
                const underflow = Math.abs(targetScrollLeft);
                targetScrollLeft = totalWidth - underflow;
            } else if (targetScrollLeft >= totalWidth) {
                const overflow = targetScrollLeft - totalWidth;
                targetScrollLeft = overflow;
            }

            galleryContainer.scrollLeft = targetScrollLeft;
        }

        let storedAnimation = 'none';

        function stopScrollHint() {
            if (fadedOut) return;
            fadedOut = true;

            storedAnimation = scrollHint.style.animation;

            const stopAnimation = () => {
                scrollHint.style.animation = 'none';
                scrollHint.style.opacity = '0';
                scrollHint.removeEventListener('animationiteration', stopAnimation);
            };
            scrollHint.addEventListener('animationiteration', stopAnimation);
        }

        function startScrollHint() {
            fadedOut = false;
            scrollHint.style.opacity = '1';
            if (storedAnimation !== 'none') {
                scrollHint.style.animation = storedAnimation;
            }
        }

        function loadBiggerImagesIfNeeded() {
            const screenHeightMinusNavbar = window.innerHeight - 50;
            let newChosenHeight = 0;

            for (const h of availableHeights) {
                if (screenHeightMinusNavbar <= h) {
                    newChosenHeight = h;
                    break;
                }
            }

            if (newChosenHeight === 0) {
                newChosenHeight = availableHeights[availableHeights.length - 1];
            }

            if (newChosenHeight > currentChosenHeight) {
                currentChosenHeight = newChosenHeight;
                const images = document.querySelectorAll('.gallery-image');
                images.forEach(img => {
                    const path = img.getAttribute(`data-${newChosenHeight}`);
                    if (path) {
                        img.src = path;
                    }
                });
            }
        }

        function setScrollHintDirection() {
            const isTouchDevice = window.matchMedia('(pointer: coarse)').matches;
            if (isTouchDevice) {
                scrollHint.innerHTML = '&#x2192;';
                scrollHint.style.animation = 'arrowSideways 1.5s infinite';
            } else {
                scrollHint.innerHTML = '&#x2193;';
                scrollHint.style.animation = 'arrowDownwards 1.5s infinite';
            }
        }

        document.addEventListener('wheel', e => {
            stopScrollHint();
            const scrollAmount = e.deltaY !== 0 ? e.deltaY : e.deltaX;
            ensureWraparound(scrollAmount);
        });

        document.addEventListener('keydown', e => {
            stopScrollHint();
            switch (e.key) {
                case 'ArrowLeft':
                case 'ArrowUp':
                case 'PageUp':
                    ensureWraparound(-200);
                    break;
                case 'ArrowRight':
                case 'ArrowDown':
                case 'PageDown':
                    ensureWraparound(200);
                    break;
            }
        });

        galleryContainer.addEventListener('scroll', () => {
            stopScrollHint();
            wrapScroll();
        });

        scrollHint.addEventListener('click', () => {
            galleryContainer.scrollBy({ left: 200, behavior: 'smooth' });
        });

        document.addEventListener('DOMContentLoaded', () => {
            duplicateContent();
            loadBiggerImagesIfNeeded();
            setScrollHintDirection();
        });

        window.addEventListener('resize', () => {
            loadBiggerImagesIfNeeded();
        });

        const aboutLink = document.getElementById('about-link');
        const aboutOverlay = document.getElementById('about-overlay');
        const aboutClose = document.getElementById('about-close');

        aboutLink.addEventListener('click', () => {
            aboutOverlay.classList.add('active');
        });

        aboutClose.addEventListener('click', () => {
            aboutOverlay.classList.remove('active');
        });

        window.addEventListener('click', (event) => {
            if (event.target === aboutOverlay) {
                aboutOverlay.classList.remove('active');
            }
        });
    </script>
</body>
</html>
